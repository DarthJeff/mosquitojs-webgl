/*! mosquitojs - v0.2.4 - 2016-04-01
* Copyright (c) 2016 Jeff Brannon; Licensed MIT */
"use strict";window.mosquito=new function(){function a(a){function f(b){if(void 0===o){o=[p];for(var d=0;d<a.length;d++)o.push(c[a[d]])}for(var f=0;f<o.length;f++){var g=o[f].service(b);if(void 0!==g){if(void 0===g.instance)switch(g.serviceType){case e.service:case e.observableInterface:g.instance=i(g);break;default:g.instance=h(g)}return g.instance}}throw"Service undefined: "+b}function g(a){for(var b=[],c=0;c<a.length;c++)b.push(f(a[c]));return b}function h(a){if(void 0!==a.observableInterfaces)for(var b=0;b<a.observableInterfaces.length;b++){var c=a.observableInterfaces[b];void 0===d[c]&&(d[c]=[]),d[c].push(a)}var e=g(a.dependentServices);return a.constructor.apply(this,e)}function i(a){return new h(a)}function j(a,b,c,d,e){if(d){if(void 0!==r[b]&&!e)throw"Service already defined: "+b;var f={serviceType:a,dependentServices:c,constructor:d};return m(f),r[b]=f}return r[b]}function k(a){var b={dependentServices:[],constructor:a};return a instanceof Array&&(b.constructor=a.pop(),b.dependentServices=a),b}function l(a,b){return b=n(b),function(){this.next=function(c,e){if(-1===b.indexOf(c))throw"Observable method not declared: "+c;var f=d[a];if(void 0!==f)for(var g=0;g<f.length;g++)void 0!==f[g].instance&&void 0!==f[g].instance[c]&&f[g].instance[c](e)}}}function m(a){a.fromObservableInterface=function(b){b=n(b),a.observableInterfaces=b}}function n(a){return a instanceof Array==!1&&(a=[a]),a}var o,p=this,q=[],r=[];this.controller=function(a,b){if(b){if(void 0!==q[a])throw"Controller already defined: "+a;return q[a]=k(b),m(q[a]),q[a]}if(void 0===q[a])throw"Controller undefined: "+a;return void 0===q[a].instance&&(q[a].instance=i(q[a])),q[a].instance},this.service=function(a,b){var c=k(b);return j(e.service,a,c.dependentServices,c.constructor)},this.factory=function(a,b){var c=k(b);return j(e.factory,a,c.dependentServices,c.constructor)},this.provider=function(a,b){var c=j(e.provider,a,[],b),d=i(c),f=k(d.$get);return j(e.provider,a,f.dependentServices,f.constructor,!0)},this.observableInterface=function(a,b){return j(e.observableInterface,a,[],l(a,b))},this.run=function(a){if(void 0===a)throw"Run method undefined";var c=k(a);b.push(c),1===b.length&&(document.onreadystatechange=function(){if("complete"===document.readyState)for(var a=0;a<b.length;a++)h(b[a])})}}var b=[],c=[],d=[],e={service:1,factory:2,provider:3,observableInterface:4};this.module=function(b,d){if(d){if(void 0!==c[b])throw"Module already defined: "+b;return c[b]=new a(d)}if(void 0===c[b])throw"Module undefined: "+b;return c[b]}};
